"use strict";(self.webpackChunkonsides_panel=self.webpackChunkonsides_panel||[]).push([[5737],{5737:function(e,n,s){s.r(n),s.d(n,{default:function(){return I}});var t=s(5861),a=s(885),r=s(7757),c=s.n(r),i=(s(6430),s(2632),s(8569),s(8995),s(5033),s(7313)),l=s(3830),o=s(6231),d=s(4382),u=s(7338),h=s(1422),f=s(7199),m=s(4105),x=s(7936),N=s(595),E=s(5951),g=s(2588),p=s(2995),v=s(2756),j=s(2213),S=s(7764),Z=s(3605),C=s(7623),_=s(7823),T=s(502),b=s(3673),A=s(9625),U=s(4410),R=s(6417),M=function(e){e.match;var n=i.useContext(U.FeedbackContext),s=(0,l.k6)(),r=i.useState(""),M=(0,a.Z)(r,2),I=M[0],w=M[1],O=i.useState(""),y=(0,a.Z)(O,2),F=y[0],P=y[1],k=i.useState(""),L=(0,a.Z)(k,2),K=L[0],D=L[1],H=i.useState(""),G=(0,a.Z)(H,2),W=G[0],B=G[1],V=i.useState(""),Q=(0,a.Z)(V,2),z=Q[0],q=Q[1],Y=i.useState(""),X=(0,a.Z)(Y,2),J=X[0],$=X[1],ee=i.useState(!0),ne=(0,a.Z)(ee,2),se=ne[0],te=ne[1],ae=i.useState(!1),re=(0,a.Z)(ae,2),ce=re[0],ie=re[1],le=i.useState(!1),oe=(0,a.Z)(le,2),de=oe[0],ue=oe[1],he=i.useState([]),fe=(0,a.Z)(he,2),me=fe[0],xe=fe[1],Ne=i.useState([]),Ee=(0,a.Z)(Ne,2),ge=Ee[0],pe=Ee[1],ve=i.useState([]),je=(0,a.Z)(ve,2),Se=je[0],Ze=je[1],Ce=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{e&&n.useLoading(!0,"Carregando..."),_.ZP.get("/users").then((function(e){xe(e.data),n.useLoading(!1)}))}catch(s){console.log("erro"),n.useLoading(!1)}},_e=function(){var e=(0,t.Z)(c().mark((function e(s){var t,a,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&s.preventDefault(),K&&F&&null!==z&&void 0!==z&&z.value){e.next=3;break}return e.abrupt("return",n.useError(!0,"Informe todos os campos obrigat\xf3rios!"));case 3:if(n.useLoading(!0,"Salvando registro..."),e.prev=4,r={name:F,email:K,password:W,profile_id:null!==(t=null===z||void 0===z?void 0:z.value)&&void 0!==t?t:"",franchise_id:null!==(a=null===J||void 0===J?void 0:J.value)&&void 0!==a?a:"",force_password_change:se,is_actived:ce},!I){e.next=11;break}return e.next=9,_.ZP.put("/users/".concat(I),r);case 9:e.next=13;break;case 11:return e.next=13,_.ZP.post("/users",r);case 13:n.useSuccess(!0,"Registro salvo com sucesso"),Ce(!1),ue(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.log("erro ao cadastrar"),n.useLoading(!1);case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(n){return e.apply(this,arguments)}}(),Te=function(){w(""),P(""),D(""),B(""),q(),$(),te(!0),ie(!0),ue(!0)};return i.useEffect((function(){Ce(),_.ZP.get("/profiles?is_actived=true").then((function(e){pe(e.data)})),_.ZP.get("/franchises?is_actived=true").then((function(e){Ze(e.data)}))}),[]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(d.Z,{children:(0,R.jsxs)(T.F,{xxs:"12",children:[(0,R.jsxs)("div",{className:"ml-0 mr-0 mb-0 d-flex row flex-column",children:[(0,R.jsxs)("a",{href:"javascript:void()",className:"btn-link text-small mb-1",onClick:function(){return s.goBack()},children:[(0,R.jsx)("span",{className:"glyph-icon iconsminds-left-1"})," Voltar"]}),(0,R.jsxs)("h1",{className:"font-weight-bold",style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,R.jsx)("span",{children:"Usu\xe1rios"}),(0,A.rc)("USERS","STORE",(0,R.jsx)(R.Fragment,{children:(0,R.jsx)("span",{style:{},className:"d-flex",children:(0,R.jsx)(x.Z,{color:"success",onClick:function(){return Te()},children:"Adicionar"})})}))]})]}),(0,R.jsxs)(d.Z,{children:[(0,R.jsx)(T.F,{xxs:"12",xl:"12",className:"mb-5",children:(0,R.jsx)(u.Z,{style:{width:"100%"},children:(0,R.jsx)(h.Z,{children:(0,R.jsx)(d.Z,{children:(0,R.jsx)(T.F,{xxs:"12",xl:"12",children:(0,R.jsxs)(o.iA,{children:[(0,R.jsx)(o.hr,{children:(0,R.jsxs)(o.Tr,{children:[(0,R.jsx)(o.Th,{children:"Nome"}),(0,R.jsx)(o.Th,{children:"Usu\xe1rio"}),(0,R.jsx)(o.Th,{className:"text-center",children:"Perfil"}),(0,R.jsx)(o.Th,{className:"highlighter",style:{textAlign:"center"},children:"Franquia"}),(0,R.jsx)(o.Th,{className:"highlighter",style:{textAlign:"center"},children:"Status"}),(0,R.jsx)(o.Th,{className:"d-flex",style:{alignItems:"center",justifyContent:"right"}})]})}),(0,R.jsx)(o.p3,{children:me.map((function(e){var s,a,r,i;return(0,R.jsxs)(o.Tr,{className:"mb-1",id:"users-".concat(e.id),children:[(0,A.rc)("USERS","UPDATE",(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(o.Td,{onClick:function(){return function(e){w(e.id),P(e.name),D(e.email),B(""),q({value:e.profile.id,label:e.profile.name}),$(e.franchise?{value:e.franchise.id,label:e.franchise.name}:void 0),te(!1),ie(e.is_actived),ue(!0)}(e)},className:"btn-link",children:e.name})}),(0,R.jsx)(o.Td,{children:e.name})),(0,R.jsx)(o.Td,{children:e.email}),(0,R.jsx)(o.Td,{className:"text-center",children:null!==(s=null===e||void 0===e||null===(a=e.profile)||void 0===a?void 0:a.name)&&void 0!==s?s:"-"}),(0,R.jsx)(o.Td,{style:{textAlign:"center"},children:(0,R.jsx)(f.Z,{pill:!0,className:"highlighter",color:"info",children:null!==(r=null===e||void 0===e||null===(i=e.franchise)||void 0===i?void 0:i.name)&&void 0!==r?r:"-"})}),(0,R.jsx)(o.Td,{style:{textAlign:"center"},children:(0,R.jsx)(f.Z,{pill:!0,className:"highlighter",color:e.is_actived?"success":"warning",children:e.is_actived?"Ativo":"Inativo"})}),(0,R.jsx)(o.Td,{className:"d-flex",style:{alignItems:"center",justifyContent:"right"},children:(0,R.jsxs)(N.Z,{size:"xs",children:[(0,A.rc)("USERS","DISABLE-ENABLE",(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(x.Z,{id:"btn2-".concat(e.id),color:"warning",onClick:function(){return function(e,s){n.useConfirmAlert(!0,"Tem certeza que deseja ".concat(s?"desativar":"ativar"," esse registro?"),(0,t.Z)(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.useLoading(!0,"Atualizando registro..."),t.next=3,_.ZP.put("/users/".concat(e),{is_actived:!s});case 3:n.useSuccess(!0,"Registro atualizado com sucesso"),Ce(!1);case 5:case"end":return t.stop()}}),t)}))))}(e.id,e.is_actived)},children:[(0,R.jsx)("div",{className:"glyph-icon iconsminds-power"}),(0,R.jsx)(b.Z,{id:"btn2-".concat(e.id),text:e.is_actived?"Desativar":"Ativar"})]})})),(0,R.jsxs)(R.Fragment,{children:[(0,A.rc)("USERS","DESTROY",(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(x.Z,{id:"btn3-".concat(e.id),color:"danger",onClick:function(){return function(e){n.useConfirmAlert(!0,"Todos os registros relacionados ser\xe3o removidos! Tem certeza que deseja continuar?",(0,t.Z)(c().mark((function s(){return c().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n.useLoading(!0,"Excluindo registro..."),s.next=3,_.ZP.delete("/users/".concat(e));case 3:n.useSuccess(!0,"Registro deletado com sucesso"),Ce(!1);case 5:case"end":return s.stop()}}),s)}))))}(e.id)},children:[(0,R.jsx)("div",{className:"glyph-icon simple-icon-trash"}),(0,R.jsx)(b.Z,{id:"btn3-".concat(e.id),text:"Remover"})]})}))," "]})]})})]})}))})]})})})})})}),(0,R.jsx)(T.F,{xss:"12",className:"text-center  ",children:0===me.length?(0,R.jsx)("small",{children:(0,R.jsx)("strong",{children:"Nenhum registro encontrado"})}):null})]})]})}),(0,R.jsxs)(p.Z,{wrapClassName:"modal-right",size:"sm",scrollable:!0,isOpen:de,style:{minWidth:"10vw",width:"100%",minHeight:"100%"},toggle:function(){return ue(!1)},children:[(0,R.jsx)(v.Z,{children:"Usu\xe1rio"}),(0,R.jsx)(j.Z,{children:(0,R.jsxs)("form",{onSubmit:_e,action:"#",children:[(0,R.jsx)(d.Z,{children:(0,R.jsx)(T.F,{sm:"12",children:(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(E.Z,{for:"franchise_id",className:"font-weight-bold",children:"* Franquia"}),(0,R.jsx)(Z.ZP,{isClearable:!0,id:"franchise_id",type:"select",placeholder:"Selecione...",options:Se.map((function(e){return{value:e.id,label:e.name}})),defaultValue:J,value:J,onChange:function(e){return $(e)}})]})})}),(0,R.jsx)(d.Z,{children:(0,R.jsx)(T.F,{sm:"12",children:(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(E.Z,{for:"name",className:"font-weight-bold",children:"* Nome"}),(0,R.jsx)(g.Z,{className:"form-control",type:"text",required:!0,placeholder:"",id:"name",value:F,onChange:function(e){return P(e.target.value)}})]})})}),(0,R.jsx)(d.Z,{children:(0,R.jsx)(T.F,{sm:"12",children:(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(E.Z,{for:"email",className:"font-weight-bold",children:"* E-mail"}),(0,R.jsx)(g.Z,{autocomplete:"new-password",required:!0,className:"form-control",type:"email",id:"email",value:K,onChange:function(e){return D(e.target.value)}})]})})}),(0,R.jsx)(d.Z,{children:(0,R.jsx)(T.F,{sm:"12",xs:"12",children:(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(E.Z,{for:"password",className:"font-weight-bold",children:I?"Senha":"* Senha"}),(0,R.jsx)(g.Z,{autocomplete:"new-password",required:!I,className:"form-control",type:"password",id:"password",value:W,onChange:function(e){return B(e.target.value)}})]})})}),(0,R.jsx)(d.Z,{children:(0,R.jsx)(T.F,{sm:"12",children:(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(E.Z,{for:"profile_id",className:"font-weight-bold",children:"* Perfil"}),(0,R.jsx)(Z.ZP,{id:"profile_id",type:"select",placeholder:"Selecione...",options:ge.map((function(e){return{value:e.id,label:e.name}})),defaultValue:z,value:z,onChange:function(e){return q(e)}})]})})}),(0,R.jsx)(d.Z,{children:(0,R.jsx)(T.F,{sm:"12",children:(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(E.Z,{for:"is_actived",className:"font-weight-bold",children:"Inativo/Ativo"}),(0,R.jsx)(C.Z,{className:"custom-switch custom-switch-primary",checked:ce,onChange:function(e){return ie(e)}})]})})}),(0,R.jsx)(d.Z,{children:(0,R.jsx)(T.F,{sm:"12",children:(0,R.jsxs)(m.Z,{children:[(0,R.jsx)(E.Z,{for:"force_password_change",children:"For\xe7ar altera\xe7\xe3o de senha no pr\xf3ximo login"}),(0,R.jsx)(C.Z,{className:"custom-switch custom-switch-primary",checked:se,onChange:function(e){return te(e)}})]})})}),(0,R.jsx)("button",{type:"submit",style:{display:"none"},id:"btnSubmit"})]})}),(0,R.jsxs)(S.Z,{className:"justify-content-end",children:[(0,R.jsx)("button",{type:"button",className:"btn btn-light btn-sm",onClick:function(){return ue(!1)},children:"Fechar"}),(0,R.jsx)("button",{type:"submit",className:"btn btn-success btn-shadow btn-lg ",onClick:function(){return document.querySelector("#btnSubmit").click()},children:"Salvar"})]})]})]})},I=i.memo(M)},7623:function(e,n,s){s.d(n,{Z:function(){return h}});var t=s(4942),a=s(885),r=s(5987),c=s(7313),i=s(6123),l=s.n(i);var o={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var n=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||n>=o.F1&&n<=o.F12)return!1;switch(n){case o.ALT:case o.CAPS_LOCK:case o.CONTEXT_MENU:case o.CTRL:case o.DOWN:case o.END:case o.ESC:case o.HOME:case o.INSERT:case o.LEFT:case o.MAC_FF_META:case o.META:case o.NUMLOCK:case o.NUM_CENTER:case o.PAGE_DOWN:case o.PAGE_UP:case o.PAUSE:case o.PRINT_SCREEN:case o.RIGHT:case o.SHIFT:case o.UP:case o.WIN_KEY:case o.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=o.ZERO&&e<=o.NINE)return!0;if(e>=o.NUM_ZERO&&e<=o.NUM_MULTIPLY)return!0;if(e>=o.A&&e<=o.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case o.SPACE:case o.QUESTION_MARK:case o.NUM_PLUS:case o.NUM_MINUS:case o.NUM_PERIOD:case o.NUM_DIVISION:case o.SEMICOLON:case o.DASH:case o.EQUALS:case o.COMMA:case o.PERIOD:case o.SLASH:case o.APOSTROPHE:case o.SINGLE_QUOTE:case o.OPEN_SQUARE_BRACKET:case o.BACKSLASH:case o.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},d=o,u=c.forwardRef((function(e,n){var s,i=e.prefixCls,o=void 0===i?"rc-switch":i,u=e.className,h=e.checked,f=e.defaultChecked,m=e.disabled,x=e.loadingIcon,N=e.checkedChildren,E=e.unCheckedChildren,g=e.onClick,p=e.onChange,v=e.onKeyDown,j=(0,r.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),S=function(e,n){var s=n||{},t=s.defaultValue,r=s.value,i=s.onChange,l=s.postState,o=c.useState((function(){return void 0!==r?r:void 0!==t?"function"===typeof t?t():t:"function"===typeof e?e():e})),d=(0,a.Z)(o,2),u=d[0],h=d[1],f=void 0!==r?r:u;l&&(f=l(f));var m=c.useRef(i);m.current=i;var x=c.useCallback((function(e){h(e),f!==e&&m.current&&m.current(e,f)}),[f,m]),N=c.useRef(!0);return c.useEffect((function(){N.current?N.current=!1:void 0===r&&h(r)}),[r]),[f,x]}(!1,{value:h,defaultValue:f}),Z=(0,a.Z)(S,2),C=Z[0],_=Z[1];function T(e,n){var s=C;return m||(_(s=e),null===p||void 0===p||p(s,n)),s}var b=l()(o,u,(s={},(0,t.Z)(s,"".concat(o,"-checked"),C),(0,t.Z)(s,"".concat(o,"-disabled"),m),s));return c.createElement("button",Object.assign({},j,{type:"button",role:"switch","aria-checked":C,disabled:m,className:b,ref:n,onKeyDown:function(e){e.which===d.LEFT?T(!1,e):e.which===d.RIGHT&&T(!0,e),null===v||void 0===v||v(e)},onClick:function(e){var n=T(!C,e);null===g||void 0===g||g(n,e)}}),x,c.createElement("span",{className:"".concat(o,"-inner")},C?N:E))}));u.displayName="Switch";var h=u},3605:function(e,n,s){var t=s(1263),a=s(6601),r=s(5671),c=s(3144),i=s(136),l=s(3598),o=s(7313),d=s(1639),u=s(2575),h=s(6912),f=(s(1902),s(1168),o.Component,(0,a.m)(t.S));n.ZP=f},7199:function(e,n,s){var t=s(7462),a=s(3366),r=s(7313),c=s(5192),i=s.n(c),l=s(6123),o=s.n(l),d=s(8345),u=["className","cssModule","color","innerRef","pill","tag"],h={color:i().string,pill:i().bool,tag:d.iC,innerRef:i().oneOfType([i().object,i().func,i().string]),children:i().node,className:i().string,cssModule:i().object},f=function(e){var n=e.className,s=e.cssModule,c=e.color,i=e.innerRef,l=e.pill,h=e.tag,f=(0,a.Z)(e,u),m=(0,d.mx)(o()(n,"badge","badge-"+c,!!l&&"badge-pill"),s);return f.href&&"span"===h&&(h="a"),r.createElement(h,(0,t.Z)({},f,{className:m,ref:i}))};f.propTypes=h,f.defaultProps={color:"secondary",pill:!1,tag:"span"},n.Z=f},595:function(e,n,s){var t=s(7462),a=s(3366),r=s(7313),c=s(5192),i=s.n(c),l=s(6123),o=s.n(l),d=s(8345),u=["className","cssModule","size","vertical","tag"],h={tag:d.iC,"aria-label":i().string,className:i().string,cssModule:i().object,role:i().string,size:i().string,vertical:i().bool},f=function(e){var n=e.className,s=e.cssModule,c=e.size,i=e.vertical,l=e.tag,h=(0,a.Z)(e,u),f=(0,d.mx)(o()(n,!!c&&"btn-group-"+c,i?"btn-group-vertical":"btn-group"),s);return r.createElement(l,(0,t.Z)({},h,{className:f}))};f.propTypes=h,f.defaultProps={tag:"div",role:"group"},n.Z=f}}]);