"use strict";(self.webpackChunkonsides_panel=self.webpackChunkonsides_panel||[]).push([[8175],{8175:function(e,n,s){s.r(n),s.d(n,{default:function(){return M}});var t=s(5861),c=s(885),r=s(7757),i=s.n(r),a=(s(6430),s(2632),s(8569),s(8995),s(5033),s(7313)),o=s(3830),l=s(6231),d=s(4382),u=s(7338),h=s(1422),m=s(7199),f=s(4105),x=s(7936),p=s(595),N=s(5951),E=s(2588),g=s(2995),j=s(2756),_=s(2213),v=s(7764),S=s(502),C=s(3673),b=s(9625),Z=s(7623),T=s(7823),A=s(4410),I=s(6417),O=function(e){e.match;var n,s=a.useContext(A.FeedbackContext),r=(0,o.k6)(),O=a.useState(""),M=(0,c.Z)(O,2),y=M[0],R=M[1],P=a.useState(""),U=(0,c.Z)(P,2),F=U[0],k=U[1],L=a.useState(!0),w=(0,c.Z)(L,2),K=w[0],D=w[1],H=a.useState(!1),W=(0,c.Z)(H,2),G=W[0],B=W[1],Q=a.useState(!1),z=(0,c.Z)(Q,2),V=z[0],Y=z[1],X=a.useState(!1),q=(0,c.Z)(X,2),J=q[0],$=q[1],ee=a.useState([]),ne=(0,c.Z)(ee,2),se=ne[0],te=ne[1],ce=a.useState({}),re=(0,c.Z)(ce,2),ie=re[0],ae=re[1],oe=a.useState({change:!1,items:[]}),le=(0,c.Z)(oe,2),de=le[0],ue=le[1],he=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{e&&s.useLoading(!0,"Carregando perfis..."),T.ZP.get("/profiles").then((function(e){te(e.data),s.useLoading(!1)}))}catch(n){console.log("erro"),s.useLoading(!1)}},me=function(){var e=(0,t.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.preventDefault(),s.useLoading(!0,"Salvando perfil..."),e.prev=2,!y){e.next=8;break}return e.next=6,T.ZP.put("/profiles/".concat(y),{name:F,is_actived:K,show_all_user:G});case 6:e.next=10;break;case 8:return e.next=10,T.ZP.post("/profiles",{name:F,is_actived:K,show_all_user:G});case 10:s.useSuccess(!0,"Perfil salvo com sucesso"),he(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("erro ao cadastrar perfil"),s.useLoading(!1);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(n){return e.apply(this,arguments)}}(),fe=function(){var e=(0,t.Z)(i().mark((function e(n,s,t){var c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{T.ZP.post("/profiles/".concat(ie.id,"/permissions"),{module_id:n,operation_id:s,checked:t}),c=de.items.map((function(e){return e.module_id===n&&e.operations.map((function(e){return e.operation_id===s&&(e.checked=t),e})),e})),ue({change:de.change,items:c})}catch(r){console.log("erro ao cadastrar permiss\xe3o",r)}case 1:case"end":return e.stop()}}),e)})));return function(n,s,t){return e.apply(this,arguments)}}(),xe=function(e){ae(e),function(e){try{s.useLoading(!0,"Carregando permiss\xf5es do perfil...<br /><b>Pode demorar um pouco</b>"),T.ZP.get("/profiles/".concat(e,"/permissions")).then((function(e){ue({change:!de.change,items:e.data}),$(!0),s.useLoading(!1)}))}catch(n){s.useError(!0,"Oops! Ocorreu um erro ao tentar consultar as permiss\xf5es do perfil")}}(e.id)};return a.useEffect((function(){he()}),[]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(d.Z,{children:(0,I.jsxs)(S.F,{xxs:"12",children:[(0,I.jsxs)("div",{className:"ml-0 mr-0 mb-0 d-flex row flex-column",children:[(0,I.jsxs)("a",{href:"javascript:void()",className:"btn-link text-small mb-1",onClick:function(){return r.goBack()},children:[(0,I.jsx)("span",{className:"glyph-icon iconsminds-left-1"})," Voltar"]}),(0,I.jsxs)("h1",{className:"font-weight-bold",style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,I.jsx)("span",{children:"Perfil de acesso"}),null!==(n=(0,b.ts)())&&void 0!==n&&n.is_user?null:(0,I.jsx)(I.Fragment,{children:(0,b.rc)("PROFILES","STORE",(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("span",{style:{},className:"d-flex",children:(0,I.jsx)(x.Z,{size:"md",color:"success",className:"top-right-button btn",onClick:function(){k(""),D(!0),B(!1),R(""),Y(!0)},children:"Adicionar"})})}))})]})]}),(0,I.jsxs)(d.Z,{children:[(0,I.jsx)(S.F,{xxs:"12",xl:"12",className:"mb-5",children:(0,I.jsx)(u.Z,{style:{width:"100%"},children:(0,I.jsx)(h.Z,{children:(0,I.jsx)(d.Z,{children:(0,I.jsx)(S.F,{xxs:"12",xl:"12",children:(0,I.jsxs)(l.iA,{children:[(0,I.jsx)(l.hr,{children:(0,I.jsxs)(l.Tr,{children:[(0,I.jsx)(l.Th,{children:"Nome"}),(0,I.jsx)(l.Th,{style:{textAlign:"center"},children:"Situa\xe7\xe3o"}),(0,I.jsx)(l.Th,{className:"d-flex",style:{alignItems:"center",justifyContent:"right",marginRight:70}})]})}),(0,I.jsx)(l.p3,{children:se.map((function(e){return(0,I.jsxs)(l.Tr,{className:"mb-1",id:"profile-".concat(e.id),children:[(0,b.rc)("PROFILES","UPDATE",(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(l.Td,{onClick:function(){return function(e){R(e.id),k(e.name),D(e.is_actived),B(e.show_all_user),Y(!0)}(e)},className:"btn-link",children:e.name})}),(0,I.jsx)(l.Td,{children:e.name})),(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(l.Td,{style:{textAlign:"center"},children:(0,I.jsx)(m.Z,{pill:!0,className:"highlighter",color:e.is_actived?"success":"warning",children:e.is_actived?"Ativo":"Inativo"})})}),(0,I.jsx)(l.Td,{className:"d-flex",style:{alignItems:"center",justifyContent:"right"},children:(0,I.jsxs)(p.Z,{size:"xs",children:[(0,b.rc)("PROFILES","DISABLE-ENABLE",(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(x.Z,{id:"btn2-".concat(e.id),color:"warning",onClick:function(){return function(e,n){s.useConfirmAlert(!0,"Tem certeza que deseja ".concat(n?"desativar":"ativar"," esse registro?"),(0,t.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.useLoading(!0,"Atualizando registro..."),t.next=3,T.ZP.put("/profiles/".concat(e),{is_actived:!n});case 3:s.useSuccess(!0,"Registro atualizado com sucesso"),he(!1);case 5:case"end":return t.stop()}}),t)}))))}(e.id,e.is_actived)},children:[(0,I.jsx)("div",{className:"glyph-icon iconsminds-power"}),(0,I.jsx)(C.Z,{id:"btn2-".concat(e.id),text:e.is_actived?"Desativar":"Ativar"})]})})),(0,b.rc)("PROFILES","PERMISSIONS",(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(x.Z,{id:"btn3-".concat(e.id),color:"primary",onClick:function(){return xe(e)},children:[(0,I.jsx)("div",{className:"glyph-icon simple-icon-check"}),(0,I.jsx)(C.Z,{id:"btn3-".concat(e.id),text:"Permiss\xf5es"})]})}))]})})]})}))})]})})})})})}),(0,I.jsx)(S.F,{xss:"12",className:"text-center  ",children:0===se.length?(0,I.jsx)("small",{children:(0,I.jsx)("strong",{children:"Nenhum registro encontrado"})}):null})]})]})}),(0,I.jsxs)(g.Z,{wrapClassName:"modal-right",size:"sm",isOpen:V,style:{minWidth:"10vw",width:"100%"},toggle:function(){return Y(!1)},children:[(0,I.jsx)(j.Z,{children:"Perfil"}),(0,I.jsx)(_.Z,{children:(0,I.jsxs)("form",{onSubmit:me,action:"#",children:[(0,I.jsx)(d.Z,{children:(0,I.jsx)(S.F,{sm:"12",children:(0,I.jsxs)(f.Z,{children:[(0,I.jsx)(N.Z,{for:"title",children:"Nome"}),(0,I.jsx)(E.Z,{className:"form-control",required:!0,type:"text",placeholder:"",id:"name",value:F,onChange:function(e){return k(e.target.value)}})]})})}),(0,I.jsx)(d.Z,{children:(0,I.jsx)(S.F,{sm:"12",children:(0,I.jsxs)(f.Z,{children:[(0,I.jsx)(N.Z,{for:"is_actived",children:"Ativa\xe7\xe3o"}),(0,I.jsx)(Z.Z,{className:"custom-switch custom-switch-primary",checked:K,onChange:function(e){return D(e)}})]})})})," ",(0,I.jsx)("button",{type:"submit",style:{display:"none"},id:"btnSubmitProfile"})]})}),(0,I.jsxs)(v.Z,{className:"justify-content-end",children:[(0,I.jsx)("button",{type:"button",className:"btn btn-light btn-sm",onClick:function(){return Y(!1)},children:"Fechar"}),(0,I.jsx)("button",{type:"button",className:"btn btn-success btn-shadow btn-lg ",onClick:function(){return document.querySelector("#btnSubmitProfile").click()},children:"Salvar"})]})]}),(0,I.jsxs)(g.Z,{wrapClassName:"modal-right",size:"sm",scrollable:!0,isOpen:J,style:{minWidth:"95vw",width:"100%",maxHeight:"100vh"},children:[(0,I.jsxs)(j.Z,{children:["Permiss\xf5es do perfil: ",(0,I.jsx)("b",{children:null===ie||void 0===ie?void 0:ie.name})]}),(0,I.jsx)(_.Z,{children:de.items.map((function(e,n){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(d.Z,{children:[(0,I.jsx)(S.F,{xs:"4",lg:"2",md:"2",sm:"2",style:{alignItems:"center",justifyContent:"flex-start",display:"flex"},children:(0,I.jsx)(N.Z,{className:"mb-0",children:(0,I.jsx)("strong",{children:null===e||void 0===e?void 0:e.module_name})})}),(0,I.jsx)(S.F,{xs:"8",lg:"10",md:"10",sm:"10",style:{display:"flex",gap:"35px",flexWrap:"nowrap"},children:e.operations.map((function(s){return(0,I.jsxs)("div",{className:"permission-box",children:[(0,I.jsx)(N.Z,{for:"is_actived",className:"mb-0",children:(0,I.jsx)("strong",{children:s.operation_name})}),(0,I.jsx)(Z.Z,{className:"custom-switch custom-switch-primary",checked:s.checked,onChange:function(n){return fe(null===e||void 0===e?void 0:e.module_id,s.operation_id,!s.checked)}})]},"permission-operation-".concat(n,"-").concat(s.operation_id))}))})]},"permission-module-".concat(n)),(0,I.jsx)("hr",{})]})}))}),(0,I.jsx)(v.Z,{children:(0,I.jsx)("button",{type:"button",className:"btn btn-light",onClick:function(){return $(!1)},children:"Fechar"})})]})]})},M=a.memo(O)},7623:function(e,n,s){s.d(n,{Z:function(){return h}});var t=s(4942),c=s(885),r=s(5987),i=s(7313),a=s(6123),o=s.n(a);var l={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var n=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||n>=l.F1&&n<=l.F12)return!1;switch(n){case l.ALT:case l.CAPS_LOCK:case l.CONTEXT_MENU:case l.CTRL:case l.DOWN:case l.END:case l.ESC:case l.HOME:case l.INSERT:case l.LEFT:case l.MAC_FF_META:case l.META:case l.NUMLOCK:case l.NUM_CENTER:case l.PAGE_DOWN:case l.PAGE_UP:case l.PAUSE:case l.PRINT_SCREEN:case l.RIGHT:case l.SHIFT:case l.UP:case l.WIN_KEY:case l.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=l.ZERO&&e<=l.NINE)return!0;if(e>=l.NUM_ZERO&&e<=l.NUM_MULTIPLY)return!0;if(e>=l.A&&e<=l.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case l.SPACE:case l.QUESTION_MARK:case l.NUM_PLUS:case l.NUM_MINUS:case l.NUM_PERIOD:case l.NUM_DIVISION:case l.SEMICOLON:case l.DASH:case l.EQUALS:case l.COMMA:case l.PERIOD:case l.SLASH:case l.APOSTROPHE:case l.SINGLE_QUOTE:case l.OPEN_SQUARE_BRACKET:case l.BACKSLASH:case l.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},d=l,u=i.forwardRef((function(e,n){var s,a=e.prefixCls,l=void 0===a?"rc-switch":a,u=e.className,h=e.checked,m=e.defaultChecked,f=e.disabled,x=e.loadingIcon,p=e.checkedChildren,N=e.unCheckedChildren,E=e.onClick,g=e.onChange,j=e.onKeyDown,_=(0,r.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),v=function(e,n){var s=n||{},t=s.defaultValue,r=s.value,a=s.onChange,o=s.postState,l=i.useState((function(){return void 0!==r?r:void 0!==t?"function"===typeof t?t():t:"function"===typeof e?e():e})),d=(0,c.Z)(l,2),u=d[0],h=d[1],m=void 0!==r?r:u;o&&(m=o(m));var f=i.useRef(a);f.current=a;var x=i.useCallback((function(e){h(e),m!==e&&f.current&&f.current(e,m)}),[m,f]),p=i.useRef(!0);return i.useEffect((function(){p.current?p.current=!1:void 0===r&&h(r)}),[r]),[m,x]}(!1,{value:h,defaultValue:m}),S=(0,c.Z)(v,2),C=S[0],b=S[1];function Z(e,n){var s=C;return f||(b(s=e),null===g||void 0===g||g(s,n)),s}var T=o()(l,u,(s={},(0,t.Z)(s,"".concat(l,"-checked"),C),(0,t.Z)(s,"".concat(l,"-disabled"),f),s));return i.createElement("button",Object.assign({},_,{type:"button",role:"switch","aria-checked":C,disabled:f,className:T,ref:n,onKeyDown:function(e){e.which===d.LEFT?Z(!1,e):e.which===d.RIGHT&&Z(!0,e),null===j||void 0===j||j(e)},onClick:function(e){var n=Z(!C,e);null===E||void 0===E||E(n,e)}}),x,i.createElement("span",{className:"".concat(l,"-inner")},C?p:N))}));u.displayName="Switch";var h=u},7199:function(e,n,s){var t=s(7462),c=s(3366),r=s(7313),i=s(5192),a=s.n(i),o=s(6123),l=s.n(o),d=s(8345),u=["className","cssModule","color","innerRef","pill","tag"],h={color:a().string,pill:a().bool,tag:d.iC,innerRef:a().oneOfType([a().object,a().func,a().string]),children:a().node,className:a().string,cssModule:a().object},m=function(e){var n=e.className,s=e.cssModule,i=e.color,a=e.innerRef,o=e.pill,h=e.tag,m=(0,c.Z)(e,u),f=(0,d.mx)(l()(n,"badge","badge-"+i,!!o&&"badge-pill"),s);return m.href&&"span"===h&&(h="a"),r.createElement(h,(0,t.Z)({},m,{className:f,ref:a}))};m.propTypes=h,m.defaultProps={color:"secondary",pill:!1,tag:"span"},n.Z=m},595:function(e,n,s){var t=s(7462),c=s(3366),r=s(7313),i=s(5192),a=s.n(i),o=s(6123),l=s.n(o),d=s(8345),u=["className","cssModule","size","vertical","tag"],h={tag:d.iC,"aria-label":a().string,className:a().string,cssModule:a().object,role:a().string,size:a().string,vertical:a().bool},m=function(e){var n=e.className,s=e.cssModule,i=e.size,a=e.vertical,o=e.tag,h=(0,c.Z)(e,u),m=(0,d.mx)(l()(n,!!i&&"btn-group-"+i,a?"btn-group-vertical":"btn-group"),s);return r.createElement(o,(0,t.Z)({},h,{className:m}))};m.propTypes=h,m.defaultProps={tag:"div",role:"group"},n.Z=m}}]);