"use strict";(self.webpackChunkonsides_panel=self.webpackChunkonsides_panel||[]).push([[5737],{5737:function(e,s,n){n.r(s),n.d(s,{default:function(){return A}});var t=n(5861),r=n(885),i=n(7757),c=n.n(i),a=(n(6430),n(2632),n(8569),n(8995),n(5033),n(7313)),l=n(3830),o=n(6231),d=n(4382),u=n(7338),h=n(1422),x=n(7199),m=n(4105),j=n(7936),f=n(595),g=n(5951),p=n(2588),v=n(2995),Z=n(2756),b=n(2213),w=n(7764),N=n(6059),S=n(7623),y=n(7823),k=n(502),C=n(3673),F=n(9625),T=n(4410),_=n(6417),E=function(e){e.match;var s=a.useContext(T.FeedbackContext),n=(0,l.k6)(),i=a.useState(""),E=(0,r.Z)(i,2),A=E[0],P=E[1],R=a.useState(""),L=(0,r.Z)(R,2),U=L[0],q=L[1],z=a.useState(""),D=(0,r.Z)(z,2),I=D[0],B=D[1],O=a.useState(""),V=(0,r.Z)(O,2),H=V[0],W=V[1],Y=a.useState(""),G=(0,r.Z)(Y,2),J=G[0],K=G[1],M=a.useState(!0),Q=(0,r.Z)(M,2),X=Q[0],$=Q[1],ee=a.useState(!1),se=(0,r.Z)(ee,2),ne=se[0],te=se[1],re=a.useState(!1),ie=(0,r.Z)(re,2),ce=ie[0],ae=ie[1],le=a.useState([]),oe=(0,r.Z)(le,2),de=oe[0],ue=oe[1],he=a.useState([]),xe=(0,r.Z)(he,2),me=xe[0],je=xe[1],fe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{e&&s.useLoading(!0,"Carregando..."),y.ZP.get("/users").then((function(e){ue(e.data),s.useLoading(!1)}))}catch(n){console.log("erro"),s.useLoading(!1)}},ge=function(){var e=(0,t.Z)(c().mark((function e(n){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.preventDefault(),I&&U&&null!==J&&void 0!==J&&J.value){e.next=3;break}return e.abrupt("return",s.useError(!0,"Informe todos os campos obrigat\xf3rios!"));case 3:if(s.useLoading(!0,"Salvando registro..."),e.prev=4,r={name:U,email:I,password:H,profile_id:null!==(t=null===J||void 0===J?void 0:J.value)&&void 0!==t?t:"",force_password_change:X,is_actived:ne},!A){e.next=11;break}return e.next=9,y.ZP.put("/users/".concat(A),r);case 9:e.next=13;break;case 11:return e.next=13,y.ZP.post("/users",r);case 13:s.useSuccess(!0,"Registro salvo com sucesso"),fe(!1),ae(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.log("erro ao cadastrar"),s.useLoading(!1);case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(s){return e.apply(this,arguments)}}(),pe=function(){P(""),q(""),B(""),W(""),K(),$(!0),te(!0),ae(!0)};return a.useEffect((function(){fe(),y.ZP.get("/profiles?is_actived=true").then((function(e){je(e.data)}))}),[]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(d.Z,{children:(0,_.jsxs)(k.F,{xxs:"12",children:[(0,_.jsxs)("div",{className:"ml-0 mr-0 mb-0 d-flex row flex-column",children:[(0,_.jsxs)("a",{href:"javascript:void()",className:"btn-link text-small mb-1",onClick:function(){return n.goBack()},children:[(0,_.jsx)("span",{className:"glyph-icon iconsminds-left-1"})," Voltar"]}),(0,_.jsxs)("h1",{className:"font-weight-bold",style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,_.jsx)("span",{children:"Usu\xe1rios"}),(0,F.rc)("USERS","STORE",(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("span",{style:{},className:"d-flex",children:(0,_.jsx)(j.Z,{color:"success",onClick:function(){return pe()},children:"Adicionar"})})}))]})]}),(0,_.jsxs)(d.Z,{children:[(0,_.jsx)(k.F,{xxs:"12",xl:"12",className:"mb-5",children:(0,_.jsx)(u.Z,{style:{width:"100%"},children:(0,_.jsx)(h.Z,{children:(0,_.jsx)(d.Z,{children:(0,_.jsx)(k.F,{xxs:"12",xl:"12",children:(0,_.jsxs)(o.iA,{children:[(0,_.jsx)(o.hr,{children:(0,_.jsxs)(o.Tr,{children:[(0,_.jsx)(o.Th,{children:"Nome"}),(0,_.jsx)(o.Th,{children:"Usu\xe1rio"}),(0,_.jsx)(o.Th,{className:"text-center",children:"Perfil"}),(0,_.jsx)(o.Th,{className:"highlighter",style:{textAlign:"center"},children:"Status"}),(0,_.jsx)(o.Th,{className:"d-flex",style:{alignItems:"center",justifyContent:"right"}})]})}),(0,_.jsx)(o.p3,{children:de.map((function(e){var n,r;return(0,_.jsxs)(o.Tr,{className:"mb-1",id:"users-".concat(e.id),children:[(0,F.rc)("USERS","UPDATE",(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(o.Td,{onClick:function(){return function(e){P(e.id),q(e.name),B(e.email),W(""),K({value:e.profile.id,label:e.profile.name}),$(!1),te(e.is_actived),ae(!0)}(e)},className:"btn-link",children:e.name})}),(0,_.jsx)(o.Td,{children:e.name})),(0,_.jsx)(o.Td,{children:e.email}),(0,_.jsx)(o.Td,{className:"text-center",children:null!==(n=null===e||void 0===e||null===(r=e.profile)||void 0===r?void 0:r.name)&&void 0!==n?n:"-"}),(0,_.jsx)(o.Td,{style:{textAlign:"center"},children:(0,_.jsx)(x.Z,{pill:!0,className:"highlighter",color:e.is_actived?"success":"warning",children:e.is_actived?"Ativo":"Inativo"})}),(0,_.jsx)(o.Td,{className:"d-flex",style:{alignItems:"center",justifyContent:"right"},children:(0,_.jsxs)(f.Z,{size:"xs",children:[(0,F.rc)("USERS","DISABLE-ENABLE",(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(j.Z,{id:"btn2-".concat(e.id),color:"warning",onClick:function(){return function(e,n){s.useConfirmAlert(!0,"Tem certeza que deseja ".concat(n?"desativar":"ativar"," esse registro?"),(0,t.Z)(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.useLoading(!0,"Atualizando registro..."),t.next=3,y.ZP.put("/users/".concat(e),{is_actived:!n});case 3:s.useSuccess(!0,"Registro atualizado com sucesso"),fe(!1);case 5:case"end":return t.stop()}}),t)}))))}(e.id,e.is_actived)},children:[(0,_.jsx)("div",{className:"glyph-icon iconsminds-power"}),(0,_.jsx)(C.Z,{id:"btn2-".concat(e.id),text:e.is_actived?"Desativar":"Ativar"})]})})),(0,_.jsxs)(_.Fragment,{children:[(0,F.rc)("USERS","DESTROY",(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(j.Z,{id:"btn3-".concat(e.id),color:"danger",onClick:function(){return function(e){s.useConfirmAlert(!0,"Todos os registros relacionados ser\xe3o removidos! Tem certeza que deseja continuar?",(0,t.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s.useLoading(!0,"Excluindo registro..."),n.next=3,y.ZP.delete("/users/".concat(e));case 3:s.useSuccess(!0,"Registro deletado com sucesso"),fe(!1);case 5:case"end":return n.stop()}}),n)}))))}(e.id)},children:[(0,_.jsx)("div",{className:"glyph-icon simple-icon-trash"}),(0,_.jsx)(C.Z,{id:"btn3-".concat(e.id),text:"Remover"})]})}))," "]})]})})]})}))})]})})})})})}),(0,_.jsx)(k.F,{xss:"12",className:"text-center  ",children:0===de.length?(0,_.jsx)("small",{children:(0,_.jsx)("strong",{children:"Nenhum registro encontrado"})}):null})]})]})}),(0,_.jsxs)(v.Z,{wrapClassName:"modal-right",size:"sm",scrollable:!0,isOpen:ce,style:{minWidth:"10vw",width:"100%",minHeight:"100%"},toggle:function(){return ae(!1)},children:[(0,_.jsx)(Z.Z,{children:"Usu\xe1rio"}),(0,_.jsx)(b.Z,{children:(0,_.jsxs)("form",{onSubmit:ge,action:"#",children:[(0,_.jsx)(d.Z,{children:(0,_.jsx)(k.F,{sm:"12",children:(0,_.jsxs)(m.Z,{children:[(0,_.jsx)(g.Z,{for:"name",className:"font-weight-bold",children:"* Nome"}),(0,_.jsx)(p.Z,{className:"form-control",type:"text",required:!0,placeholder:"",id:"name",value:U,onChange:function(e){return q(e.target.value)}})]})})}),(0,_.jsx)(d.Z,{children:(0,_.jsx)(k.F,{sm:"12",children:(0,_.jsxs)(m.Z,{children:[(0,_.jsx)(g.Z,{for:"email",className:"font-weight-bold",children:"* E-mail"}),(0,_.jsx)(p.Z,{autocomplete:"new-password",required:!0,className:"form-control",type:"email",id:"email",value:I,onChange:function(e){return B(e.target.value)}})]})})}),(0,_.jsx)(d.Z,{children:(0,_.jsx)(k.F,{sm:"12",xs:"12",children:(0,_.jsxs)(m.Z,{children:[(0,_.jsx)(g.Z,{for:"password",className:"font-weight-bold",children:A?"Senha":"* Senha"}),(0,_.jsx)(p.Z,{autocomplete:"new-password",required:!A,className:"form-control",type:"password",id:"password",value:H,onChange:function(e){return W(e.target.value)}})]})})}),(0,_.jsx)(d.Z,{children:(0,_.jsx)(k.F,{sm:"12",children:(0,_.jsxs)(m.Z,{children:[(0,_.jsx)(g.Z,{for:"profile_id",className:"font-weight-bold",children:"* Perfil"}),(0,_.jsx)(N.ZP,{id:"profile_id",type:"select",placeholder:"Selecione...",options:me.map((function(e){return{value:e.id,label:e.name}})),defaultValue:J,value:J,onChange:function(e){return K(e)}})]})})}),(0,_.jsx)(d.Z,{children:(0,_.jsx)(k.F,{sm:"12",children:(0,_.jsxs)(m.Z,{children:[(0,_.jsx)(g.Z,{for:"is_actived",className:"font-weight-bold",children:"Inativo/Ativo"}),(0,_.jsx)(S.Z,{className:"custom-switch custom-switch-primary",checked:ne,onChange:function(e){return te(e)}})]})})}),(0,_.jsx)(d.Z,{children:(0,_.jsx)(k.F,{sm:"12",children:(0,_.jsxs)(m.Z,{children:[(0,_.jsx)(g.Z,{for:"force_password_change",children:"For\xe7ar altera\xe7\xe3o de senha no pr\xf3ximo login"}),(0,_.jsx)(S.Z,{className:"custom-switch custom-switch-primary",checked:X,onChange:function(e){return $(e)}})]})})}),(0,_.jsx)("button",{type:"submit",style:{display:"none"},id:"btnSubmit"})]})}),(0,_.jsxs)(w.Z,{className:"justify-content-end",children:[(0,_.jsx)("button",{type:"button",className:"btn btn-light btn-sm",onClick:function(){return ae(!1)},children:"Fechar"}),(0,_.jsx)("button",{type:"submit",className:"btn btn-success btn-shadow btn-lg ",onClick:function(){return document.querySelector("#btnSubmit").click()},children:"Salvar"})]})]})]})},A=a.memo(E)}}]);